---
# This file contains the configuration settings definition for Slurm-web agent
# in RFL ConfigurationLoader format.
slurmrestd:
  socket:
    type: path
    default: /var/spool/slurm/restd/slurmrestd.socket
    doc: Path to slurmrestd UNIX socket
  version:
    type: str
    default: '0.0.39'
    doc: Slurm REST API version

filters:
  jobs:
    type: list
    content: str
    default:
    - job_id
    - user_name
    - account
    - job_state
    - partition
    doc: |
      List of jobs fields selected in slurmrestd API, all other fields are
      filtered out.
  nodes:
    type: list
    content: str
    default:
    - name
    - cpus
    - cores
    - real_memory
    - state
    - partitions
    doc: |
      List of nodes fields selected in slurmrestd API, all other fields are
      filtered out.
      jobs:
  qos:
    type: list
    content: str
    default:
    - name
    - description
    doc: |
      List of qos fields selected in slurmrestd API, all other fields are
      filtered out.

service:
  cluster:
    type: str
    required: true
    doc: Name of cluster served by agent
  interface:
    type: str
    default: localhost
    doc: Interface address to bind for incoming connections
  port:
    type: int
    default: 5000
    doc: TCP port to listen for incoming connections
  cors:
    type: bool
    default: false
    doc: When true, Cross-Origin Resource Sharing (CORS) headers are enabled.

policy:
  definition:
    type: path
    default: /usr/share/slurm-web/policy.yml
    doc: Path to RBAC policy definition file with available actions
  vendor_roles:
    type: path
    default: /usr/share/slurm-web/policy.conf
    doc: |
      Path to default vendor RBAC policy definition file with roles and
      permitted actions
  roles:
    type: path
    default: /etc/slurm-web/policy.conf
    doc: |
      Path to site RBAC policy definition file with roles and permitted actions

jwt:
  key:
    type: path
    default: /var/lib/slurm-web/jwt.key
    doc: Path to private key for JWT signature
  algorithm:
    type: str
    choices:
    # Full list available in PyJWT documentation:
    # https://pyjwt.readthedocs.io/en/latest/algorithms.html
    - HS256
    - HS384
    - HS512
    - ES256
    - ES256K
    - ES384
    - ES512
    - RS256
    - RS384
    - RS512
    - PS256
    - PS384
    - PS512
    - EdDSA
    default: HS256
    doc: Cryptographic algorithm used to sign JWT
  audience:
    type: str
    default:
    doc: |
      Audience defined in generated JWT and expected in JWT provided by clients

racksdb:
  # The default values in this section must be synchronized with RacksDB library
  #Â defaults.
  db:
    type: path
    default: /var/lib/racksdb
    doc: Path to RacksDB database
  schema:
    type: path
    default: /usr/share/racksdb/schema.yml
    doc: Path to RacksDB database schema
  extensions:
    type: path
    default: /etc/racksdb/extensions.yml
    doc: Path to site-specific RacksDB schema extensions

cache:
  enabled:
    type: bool
    default: true
    doc: Determine if caching is enabled
  host:
    type: str
    default: localhost
    doc: Hostname of Redis cache server
  port:
    type: int
    default: 6379
    doc: TCP port of Redis cache server
  password:
    type: str
    doc: Password to connect to protected Redis server
